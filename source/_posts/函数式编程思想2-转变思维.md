---
title: 函数式编程思想2-转变思维
tags:
  - 函数式编程思想
  - 读书笔记
  - CS
date: 2022-12-06 22:15:10
---


学习一门新的编程语言的思路基本上是知道如何将熟悉的概念用新的语法表达出来。通常程序员可以套用自己在别的语言中掌握的知识来学习新的语言。与之相比，学习一种新的范式是十分困难的----我们必须学会为熟悉的问题找到新的解答方法。

<!--more-->

### 1. 普通的例子

函数式编程希望能够给予程序员能够在更高的层次上工作，另一方面，也有运行时执行复杂优化的自由空间。开发者从中获得的好处体现在更低的复杂性和更高的性能上面。

#### 1.1 命令式解法

命令式编程是按照“程序是一系列改变状态的命令”来建模的一种编程风格。传统的for循环就是命令式风格的绝好例子：先确定初始状态，然后每次迭代都执行循环体中的一系列命令。

命令式编程鼓励程序员将操作安排在循环内部去执行。命令式编程语言中操作依赖相同的底层机制（对列表进行迭代）。而函数式语言为这些操作提供了针对性的辅助手段。

#### 1.2 函数式解法

函数式编程将程序描述为表达式和变换，以数学方程的形式建立模型，并且尽量避免可变的状态。

函数式编程语言可以帮助我们轻松搭建出上面的概念性解答模型，同时又不必操行各种实现细节。

> lisp 灵活的语法正是它最强大的武器之一：什么时候可读性变差了，我们就尝试调整语法去满足可读性的要求

学会更高层次的抽象，首先，可以促使我们换一种角度去归类问题，看到问题的共性。其次，让运行时有更大的余地去做智能的优化。其次，让运行时有更大的余地去做智能的优化。有时候，在不改变最终输出的前提下，调整一下作业先后次序会更有效率（例如减少需要处理的条目）。第三，可以帮助埋头实现细节的开发者看到原本视野之外的一些解决方案。

> 多从结果着眼，少纠结具体的步骤。

一般来说，面向对象的系统中粒度最小的重用单元是类，开发者往往忘记了重用可以在更小的单元上发生。

> 高阶函数消除了摩擦

### 2. 具有普遍意义的基本构造单元

#### 2.1 筛选

筛选（filter）是列表的一种基本操作：根据用户定义的条件来筛选列表中大条目，并由此产生一个较小的新列表。

> 需要根据筛选条件产生一个子集合的时候，用filter。

#### 2.2 映射

映射（map）操作对原集合的每一个元素执行给定的函数，从而变换成一个新的集合。

> 需要就地变换一个集合的时候，使用map操作

#### 2.3 折叠/化约

reduce和fold操作在功能上大致重合，两者都用一个累积量(accumulator)来“收集”集合元素。reduce函数一般在需要为累积量设定一个初始值的时候使用，而fold起始的时候积累量是空的。

> 需要将集合分成一小块一小块来处理的时候，用reduce或fold。
